#!/bin/sh

#
# SVSuite Tool for running the (comparison step) Validation/GlobalHits package
#



# Note: Should probably be a better way to look this location up
#       rather than having to know the name...

#
# it's easier to copy over all the root-related stuff
#
cp $SVSUITE_DATA_DIR/SVSuite/Validation/GlobalHits/test/*.C . 
cp $SVSUITE_DATA_DIR/SVSuite/Validation/GlobalHits/test/.rootrc . 
### cp $SVSUITE_DATA_DIR/SVSuite/Validation/GlobalHits/data/GlobalValHistograms-reference.root .
#
# not yet this...
### root -b -q MakeValidation.C &
#
INPUT_FILES=`svSuite-list-input-files`
echo "INPUT_FILES = $INPUT_FILES"
### root -b -q MakeHistograms.C\($INPUT_FILES,\"$SVSUITE_JOB_ID-GlobalHits\"\) &
root -b -q MakeHistograms.C\(\"$INPUT_FILES\",\"$SVSUITE_JOB_ID-GlobalHits\"\) &

PROCID=$!
echo $PROCID > process_id
wait $PROCID
EXIT_STATUS=$?

echo "Exit status of root is $EXIT_STATUS"



echo "Output files produced:"
/bin/ls `pwd`/*.ps
/bin/ls `pwd`/*.root

echo "Output Dir: $SVSUITE_OUTPUT_DIR"
/bin/mv -f ./*.ps $SVSUITE_OUTPUT_DIR
/bin/mv -f ./*.root $SVSUITE_OUTPUT_DIR

echo "Content of Output Dir:"
/bin/ls $SVSUITE_OUTPUT_DIR




